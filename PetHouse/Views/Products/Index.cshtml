@using PetHouse.Data.Setting;
@model PaginatedList<PetHouse.Models.Product>
@{
	ViewData["Tittle"] = ViewBag.CateName;
}


@section Style{

	<!-- Meta -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="Anil z" name="author">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="Shopwise is Powerful features and You Can Use The Perfect Build this Template For Any eCommerce Website. The template is built for sell Fashion Products, Shoes, Bags, Cosmetics, Clothes, Sunglasses, Furniture, Kids Products, Electronics, Stationery Products and Sporting Goods.">
	<meta name="keywords" content="ecommerce, electronics store, Fashion store, furniture store,  bootstrap 4, clean, minimal, modern, online store, responsive, retail, shopping, ecommerce store">

	<!-- SITE TITLE -->
	<title>Products</title>
	<!-- Favicon Icon -->
	<link rel="shortcut icon" type="image/x-icon" href="~/images/favicon.png">
	<!-- Animation CSS -->
	<link rel="stylesheet" href="~/css/animate.css">
	<!-- Latest Bootstrap min CSS -->
	<link rel="stylesheet" href="~/bootstrap/css/bootstrap.min.css">
	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800,900&display=swap" rel="stylesheet">
	<!-- Icon Font CSS -->
	<link rel="stylesheet" href="~/css/all.min.css">
	<link rel="stylesheet" href="~/css/ionicons.min.css">
	<link rel="stylesheet" href="~/css/themify-icons.css">
	<link rel="stylesheet" href="~/css/linearicons.css">
	<link rel="stylesheet" href="~/css/flaticon.css">
	<link rel="stylesheet" href="~/css/simple-line-icons.css">
	<!--- owl carousel CSS-->
	<link rel="stylesheet" href="~/owlcarousel/css/owl.carousel.min.css">
	<link rel="stylesheet" href="~/owlcarousel/css/owl.theme.css">
	<link rel="stylesheet" href="~/owlcarousel/css/owl.theme.default.min.css">
	<!-- Magnific Popup CSS -->
	<link rel="stylesheet" href="~/css/magnific-popup.css">
	<!-- jquery-ui CSS -->
	<link rel="stylesheet" href="~/css/jquery-ui.css">
	<!-- Slick CSS -->
	<link rel="stylesheet" href="~/css/slick.css">
	<link rel="stylesheet" href="~/css/slick-theme.css">
	<!-- Style CSS -->
	<link rel="stylesheet" href="~/css/style.css">
	<link rel="stylesheet" href="~/css/responsive.css">
}

<!-- END SECTION BREADCRUMB -->
<!-- START MAIN CONTENT -->
<div class="main_content">

	<!-- START SECTION SHOP -->
	<div class="section" style="padding-top:30px">
		<div class="container">
			<div class="row">
				<div class="col-lg-9">
					<div class="row align-items-center mb-4 pb-1">
						<div class="col-12">
							<div class="product_header">
								<div class="product_header_left">
									<div class="custom_select">
										<select class="form-control form-control-sm" id="Sort">
											<option value="0">Lọc</option>
											<option value="1">Giá: từ thấp đến cao</option>
											<option value="2">Giá: từ cao đến thấp</option>
										</select>
									</div>
								</div>
								<div class="product_header_right">
									<div class="products_view">
										<a href="javascript:Void(0);" class="shorting_icon grid"><i class="ti-view-grid"></i></a>
										<a href="javascript:Void(0);" class="shorting_icon list active"><i class="ti-layout-list-thumb"></i></a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row shop_container list">
						@foreach (var item in Model)
						{

							<div class="col-md-4 col-6">
								<div class="product">
									<div class="product_img">
										<a asp-area="" asp-controller="Products" asp-action="Details" asp-route-Id="@item.Id">
											<img src="@("/Admin/Img/ProductAvt/"+item.ProductImgAvt)" alt="@item.Name">
										</a>
										<div class="product_action_box">
											<ul class="list_none pr_action_btn">
												<li class="add-to-cart"><a href="#"><i class="icon-basket-loaded"></i> Add To Cart</a></li>
												<li><a asp-area="" asp-controller="Products" asp-action="Details" asp-route-Id="@item.Id"><i class="icon-magnifier-add"></i></a></li>
											</ul>
										</div>
									</div>
									<div class="product_info">
										<h6 class="product_title"><a asp-area="" asp-controller="Products" asp-action="Details" asp-route-Id="@item.Id">@item.Name</a></h6>
										<div class="product_price">
											<span class="price">@item.OrderPrice.ToString("#,###")</span>
										</div>
										<div class="rating_wrap">
											<div class="rating">
												<div class="product_rate" style="width:80%"></div>
											</div>
											<span class="rating_num">(21)</span>
										</div>
										<div class="pr_desc">
											<p>@item.Name</p>
										</div>
										<div class="list_product_action_box">
											<div class="list_none pr_action_btn add-to-cart">
												<button class="btn btn-fill-out btn-addtocart" type="button"><i class="icon-basket-loaded"></i> Thêm vào giỏ hàng</button>
												@*<li><a href="shop-product-details.html"><i class="icon-magnifier-add"></i></a></li>*@
												<input style="display:none" class="Id" value="@item.Id">
											</div>
										</div>
									</div>
								</div>
							</div>
						}
					</div>
					<div class="row">
						<div class="col-12">
							<nav>
								<ul class="pagination">
									<li class="page-item @(Model.HasPreviousPage ? "" : "disabled")">
										<a class="page-link" href="@Url.Action("Index", new { pageNumber = Model.PageIndex - 1,area = "" })">Previous</a>
									</li>
									@for (int i = 1; i <= Model.TotalPages; i++)
									{
										<li class="page-item @(Model.PageIndex == i ? "active" : "")">
											<a class="page-link" href="@Url.Action("Index", new { pageNumber = i,area = ""  })">@i</a>
										</li>
									}
									<li class="page-item @(Model.HasNextPage ? "" : "disabled")">
										<a class="page-link" href="@Url.Action("Index", new { pageNumber = Model.PageIndex + 1,area = ""  })">Next</a>
									</li>
								</ul>
							</nav>
						</div>
					</div>
				</div>
				<div class="col-lg-3 order-lg-first mt-4 pt-2 mt-lg-0 pt-lg-0">
					<div class="sidebar">
						<div class="widget">
							<h5 class="widget_title">Thương hiệu</h5>
							<ul class="list_brand">
								@foreach (var item in ViewBag.Brand)
								{
									<li>
										<div class="custome-checkbox">
											<input class="form-check-input" type="checkbox" name="checkbox" id=@item.Id value="">
											<label class="form-check-label" for=@item.Id><span>@item.Name</span></label>
										</div>
									</li>
								}
							</ul>
						</div>
						<div class="widget">
							<h5 class="widget_title">Loại sản phẩm</h5>
							<ul class="list_brand">
								@foreach (var item in ViewBag.PCategory)
								{
									<li>
										<div class="custome-checkbox">
											<input class="form-check-input" type="checkbox" name="checkbox" id=@item.Id value="">
											<label class="form-check-label" for=@item.Id><span>@item.Name</span></label>
										</div>
									</li>
								}
							</ul>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- END SECTION SHOP -->
</div>
<!-- END MAIN CONTENT -->
<style>
	.btn-fill-out {
		background-color: transparent;
		border: 1px solid #f9a529;
		color: #fff;
		position: relative;
		overflow: hidden;
		z-index: 0;
	}


		.btn-fill-out::before,
		.btn-fill-out::after {
			content: "";
			position: absolute;
			left: 0;
			top: 0;
			bottom: 0;
			background-color: #f9a529;
			z-index: -1;
			transition: all 0.3s ease-in-out;
			width: 51%;
		}

		.btn-fill-out::after {
			right: 0;
			left: auto;
		}

		.btn-fill-out:hover:before,
		.btn-fill-out:hover:after {
			width: 0;
		}
</style>
<a href="#" class="scrollup" style="display: none;"><i class="ion-ios-arrow-up"></i></a>
@section Scripts{
	<!-- Latest jQuery -->
	<script src="~/js/jquery-3.6.0.min.js"></script>
	<!-- jquery-ui -->
	<script src="~/js/jquery-ui.js"></script>
	<!-- popper min js -->
	<script src="~/js/popper.min.js"></script>
	<!-- Latest compiled and minified Bootstrap -->
	<script src="~/bootstrap/js/bootstrap.min.js"></script>
	<!-- owl-carousel min js  -->
	<script src="~/owlcarousel/js/owl.carousel.min.js"></script>
	<!-- magnific-popup min js  -->
	<script src="~/js/magnific-popup.min.js"></script>
	<!-- waypoints min js  -->
	<script src="~/js/waypoints.min.js"></script>
	<!-- parallax js  -->
	<script src="~/js/parallax.js"></script>
	<!-- countdown js  -->
	<script src="~/js/jquery.countdown.min.js"></script>
	<!-- imagesloaded js -->
	<script src="~/js/imagesloaded.pkgd.min.js"></script>
	<!-- isotope min js -->
	<script src="~/js/isotope.min.js"></script>
	<!-- jquery.dd.min js -->
	<script src="~/js/jquery.dd.min.js"></script>
	<!-- slick js -->
	<script src="~/js/slick.min.js"></script>
	<!-- elevatezoom js -->
	<script src="~/js/jquery.elevatezoom.js"></script>
	<!-- scripts js -->
	<script src="~/js/scripts.js"></script>
	<script>
		$(document).ready(function () {
			$(function () {
				$(".add-to-cart").click(function () {
					var productid = $(this).find('.Id').val();
					$.ajax({
						url: '/api/cart/add',
						type: "POST",
						dataType: "JSON",
						data: {
							productID: productid,
						},
						success: function (response) {
							if (response.result == 'Redirect') {
								window.location = response.url;
							}
							else {
								loadHeaderCart();
								alert('Thêm vào giỏ hàng thành công');
								location.reload();

							}

							console.log(response);
						},
						error: function (error) {
							alert("There was an error posting the data to the server: " + error.responseText);
						}
					});
					console.log(productid, soLuong)
				});
			});
			function loadHeaderCart() {
				$('#miniCart').load("/AjaxContent/HeaderCart");
				$('#numberCart').load("/AjaxContent/NumberCart");
			}
		});
	</script>

	<script>
		var activities = document.getElementById("Sort");
		activities.addEventListener("change", function () {
			if (activities.value == 1) 
			{
				var url = '@Url.Action("Index", new { pageNumber = 1,area = "",sort = 1})';
			}
			else
			{
				var url = '@Url.Action("Index", new { pageNumber = 1,area = "",sort = 2})';
			}
			url = url.replace("&amp;", "&")
			window.location.href = url;
		});
	</script>
	<script>
		var element = document.getElementById("Sort");
		element.value = @ViewData["stt"]
	</script>
}